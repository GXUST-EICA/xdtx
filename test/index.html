<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
	<title>åä¼šåŸ¹è®­ä¸­å¿ƒ</title>
	<style>
		:root {
			--primary: #6c5ce7;
			--secondary: #a8a4e6;
			--accent: #ff6b6b;
			--background: linear-gradient(160deg, #f8f9ff 0%, #f3f5ff 100%);
			--glass: rgba(255, 255, 255, 0.95);
			--shadow: 0 12px 40px rgba(108, 92, 231, 0.1);
			--radius: 16px; /* ç»Ÿä¸€åœ†è§’ */
			--tap-highlight: rgba(108, 92, 231, 0.1); /* ç‚¹å‡»åé¦ˆè‰² */
		}

		/* åŠ¨æ€ç›®å½•ç”Ÿæˆæ ·å¼ */
		.toc-category {
			background: var(--glass);
			backdrop-filter: blur(12px);
			border-radius: 12px;
			margin: 1rem 0;
			padding: 1rem;
			box-shadow: var(--shadow);
			transition: transform 0.2s ease;
			position: relative;
		}

		/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
		@media (max-width: 768px) {
			.sidebar {
				display: none; /* éšè—åŸå§‹ä¾§è¾¹æ  */
			}

			/* æ–°å¢æµ®åŠ¨ç›®å½•æŒ‰é’® */
			.floating-toc {
				position: fixed;
				bottom: 2rem;
				right: 1.5rem;
				z-index: 1000;
				width: 56px;
				height: 56px;
				border-radius: 50%;
				background: var(--primary);
				box-shadow: 0 8px 24px rgba(108, 92, 231, 0.3);
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: pointer;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}
			.floating-toc::after {
				content: 'ğŸ“š';
				font-size: 1.8rem;
				filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
			}
			.floating-toc.active {
				transform: rotate(135deg);
				background: var(--accent);
			}

			/* ç›®å½•å¼¹å‡ºå±‚ */
			.toc-overlay {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0,0,0,0.4);
				backdrop-filter: blur(8px);
				z-index: 999;
				opacity: 0;
				visibility: hidden;
				transition: 0.3s ease;
			}
			.toc-overlay.active {
				opacity: 1;
				visibility: visible;
			}

			/* ç›®å½•å®¹å™¨ */
			.mobile-toc {
				position: absolute;
				bottom: calc(56px + 2rem);
				right: 1.5rem;
				width: 86vw;
				max-width: 320px;
				background: var(--glass);
				border-radius: 24px;
				padding: 1.5rem;
				box-shadow: var(--shadow);
				transform: translateY(20px);
				transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
				max-height: 70vh;
				overflow-y: auto;
				-webkit-overflow-scrolling: touch;
			}
			.toc-overlay.active .mobile-toc {
				transform: translateY(0);
			}

			/* ç§»åŠ¨ç«¯ç›®å½•é¡¹ä¼˜åŒ– */
			.toc-category {
				margin: 0.5rem 0;
				background: rgba(255,255,255,0.9);
			}
			.toc-subitem {
				padding: 1rem;
				font-size: 0.95rem;
				border-radius: 12px;
				margin: 4px 0;
			}
			
			/* æœç´¢æ¡†ä¼˜åŒ– */
			.mobile-toc .search-box {
				padding: 0 1rem 1rem;
				margin: 0 -1rem;
			}
			.mobile-toc #search {
				font-size: 1rem;
				padding: 1rem;
			}

			/* ä¿è¯å†…å®¹è¶³å¤Ÿé«˜åº¦ */
			.toc {
				min-height: 120%;
			}

			/* ä¼˜åŒ–æ»šåŠ¨æ¡æ ·å¼ */
			.mobile-toc::-webkit-scrollbar {
				width: 4px;
				background: rgba(0,0,0,0.1);
			}
			.mobile-toc::-webkit-scrollbar-thumb {
				background: var(--primary);
				border-radius: 2px;
			}
		}

		/* PCç«¯å¸ƒå±€ä¼˜åŒ– */
		@media (min-width: 769px) {
			body {
				display: flex;
				min-height: 100vh;
			}

			.sidebar {
				width: 300px;
				height: 100vh;
				position: sticky;
				top: 0;
				overflow-y: auto;
				transform: none !important;
				box-shadow: 8px 0 40px rgba(108, 92, 231, 0.1);
				border-right: 1px solid var(--secondary);
				/* éšè—æ»šåŠ¨æ¡ä½†ä¿æŒæ»šåŠ¨åŠŸèƒ½ */
				scrollbar-width: none; /* Firefox */
				-ms-overflow-style: none; /* IE/Edge */
			}
			.sidebar::-webkit-scrollbar {
				display: none; /* Chrome/Safari */
			}

			.content {
				flex: 1;
				padding: 2rem 4rem;
				max-width: calc(100vw - 300px);
			}

			.menu-toggle {
				display: none; /* éšè—ç§»åŠ¨ç«¯èœå•æŒ‰é’® */
			}

			.search-box {
				position: sticky;
				top: 0;
				padding: 1.5rem;
				margin: 0 -1.5rem; /* æŠµæ¶ˆå®¹å™¨padding */
				z-index: 200;
				background: var(--glass);
				backdrop-filter: blur(10px);
			}

			.toc-category {
				margin: 0.5rem 1rem;
				transition: 0.2s all ease;
			}

			.toc-subitem {
				padding: 0.8rem 1.5rem;
				cursor: pointer;
				border-radius: 8px;
				transition: 0.2s all ease;
			}

			.toc-subitem:hover {
				background: rgba(108, 92, 231, 0.1);
			}
		}

		/* æœç´¢æ¡†ç°ä»£åŒ–æ ·å¼ */
		.search-box {
			position: sticky;
			top: 0;
			background: var(--glass);
			backdrop-filter: blur(10px);
			z-index: 200;
			padding: 1rem;
			transition: all 0.3s ease;
			width: calc(100% - 3rem);
			margin: 0 auto;
			box-sizing: border-box;
		}

		#mobile-search {
			width: 100%;
			padding: 1rem 2rem;
			border: 1px solid var(--secondary) !important;
			border-radius: 50px;
			background: rgba(255, 255, 255, 0.9);
			box-shadow: 0 2px 8px rgba(108, 92, 231, 0.1) !important;
			font-size: 1rem;
			transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='%236c5ce7' d='M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15z'/%3E%3C/svg%3E");
			background-repeat: no-repeat;
			background-position: 1rem center;
			background-size: 1.2em;
			padding-left: 2.8rem;
			max-width: 100%;
			box-sizing: border-box;
		}

		#mobile-search:focus {
			outline: none;
			box-shadow: 0 6px 16px rgba(108, 92, 231, 0.2);
			background: rgba(255, 255, 255, 0.95);
		}

		#mobile-search::placeholder {
			color: #a8a4e6;
			opacity: 0.8;
		}

		/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
		@media (max-width: 768px) {
			#mobile-search {
				font-size: 0.95rem;
				padding: 0.8rem 1.5rem;
				padding-left: 2.5rem;
				background-size: 1em;
			}
		}

		/* ç§»åŠ¨ç«¯èœå•æŒ‰é’®ä¼˜åŒ– */
		.menu-toggle {
			position: fixed;
			top: 1rem;
			left: 1rem;
			z-index: 300;
			background: var(--glass);
			border: none;
			padding: 0.8rem;
			border-radius: 50%;
			box-shadow: var(--shadow);
			-webkit-tap-highlight-color: var(--tap-highlight);
		}

		/* æ–°å¢é˜…è¯»è¿›åº¦æ¡ */
		.progress-bar {
			position: fixed;
			top: 0;
			left: 0;
			height: 3px;
			background: var(--accent);
			z-index: 500;
		}

		/* ä¼˜åŒ–ç§»åŠ¨ç«¯ç›®å½•äº¤äº’ */
		.toc-category h3 {
			cursor: pointer;
			padding: 12px;
			margin: -12px;
			border-radius: var(--radius);
			-webkit-tap-highlight-color: var(--tap-highlight);
		}
		.toc-category[data-fold="true"] .toc-subitem {
			display: none;
		}

		/* å¢å¼ºæœç´¢é«˜äº® */
		.highlight {
			background: linear-gradient(90deg, #ffd70033, #ffd70000);
			border-radius: 4px;
		}

		/* æ–°å¢Markdownå†…å®¹æ ·å¼ */
		.markdown-content {
			max-width: 800px;
			margin: 0 auto;
			padding: 2rem;
			background: var(--glass);
			border-radius: var(--radius);
			box-shadow: var(--shadow);
		}

		.markdown-content h2 {
			color: var(--primary);
			border-bottom: 2px solid var(--secondary);
			padding-bottom: 0.5rem;
		}

		.markdown-content pre {
			background: rgba(108, 92, 231, 0.05);
			padding: 1rem;
			border-radius: 8px;
			overflow-x: auto;
		}

		/* ä¼˜åŒ–ç§»åŠ¨ç«¯ç›®å½•å¸ƒå±€ */
		.mobile-toc {
			padding: 1rem;
			bottom: calc(56px + 1.5rem);
		}

		.toc-category {
			margin: 0.5rem -0.5rem;
			padding: 0.5rem;
		}

		.toc-subitem {
			margin: 4px -0.5rem;
			padding: 0.8rem 1rem !important;
		}

		/* æ·»åŠ åˆå§‹é¡µé¢çš„ä¸“å±æ ·å¼ */
		.markdown-content h1 {
			text-align: center;
			margin: 2rem 0;
			font-size: 2.5rem;
			background: linear-gradient(135deg, var(--primary), var(--accent));
			-webkit-background-clip: text;
			background-clip: text;
			-webkit-text-fill-color: transparent;
		}

		.markdown-content mermaid {
			display: block;
			margin: 2rem auto;
			max-width: 100%;
			overflow-x: auto;
		}

		.markdown-content table {
			width: 100%;
			border-collapse: collapse;
			margin: 1.5rem 0;
			background: var(--glass);
		}

		.markdown-content td, .markdown-content th {
			padding: 1rem;
			border: 1px solid var(--secondary);
		}

		blockquote {
			background: rgba(108, 92, 231, 0.05);
			border-left: 4px solid var(--primary);
			padding: 1rem;
			margin: 1.5rem 0;
			border-radius: 0 8px 8px 0;
		}

		/* é€šç”¨æ»šåŠ¨ä¼˜åŒ– */
		.toc, .mobile-toc, .sidebar {
			overflow: overlay; /* æ™ºèƒ½æ»šåŠ¨æ¡ */
			scroll-behavior: smooth;
		}

		/* ä¿®å¤ç§»åŠ¨ç«¯ç›®å½•ç©ºç™½é—®é¢˜ */
		@media (max-width: 768px) {
			.mobile-toc {
				width: 90vw;
				right: 1rem;
				margin: 0;
				padding: 1rem;
			}

			.toc-category, 
			.toc-subitem {
				margin-left: 0;
				margin-right: 0;
				padding: 0.8rem 1rem;
			}
		}

		/* æ¬¢è¿é¡µä¸“å±æ ·å¼ */
		.feature-badges {
			display: flex;
			gap: 1rem;
			margin: 1.5rem 0;
		}

		.badge {
			padding: 0.5rem 1rem;
			border-radius: 20px;
			font-size: 0.9rem;
		}

		.badge.new {
			background: var(--accent);
			color: white;
		}

		.quick-start-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
			gap: 1.5rem;
			margin: 2rem 0;
		}

		.step-card {
			background: var(--glass);
			padding: 1.5rem;
			border-radius: var(--radius);
			transition: transform 0.2s ease;
		}

		.step-card:hover {
			transform: translateY(-5px);
		}

		.mobile-features {
			display: flex;
			flex-wrap: wrap;
			gap: 1rem;
			margin: 2rem 0;
		}

		.feature-tag {
			display: flex;
			align-items: center;
			padding: 0.8rem 1.2rem;
			background: rgba(108, 92, 231, 0.1);
			border-radius: 8px;
		}
	</style>
</head>

<body>
	<!-- æ–°å¢æµ®åŠ¨æŒ‰é’® -->
	<div class="floating-toc"></div>
	
	<!-- ä¿®æ”¹åçš„ç›®å½•ç»“æ„ -->
	<div class="toc-overlay">
		<div class="mobile-toc">
			<div class="search-box">
				<input type="text" id="mobile-search" placeholder="ğŸ” æœç´¢è¯¾ç¨‹..." 
					style="width:100%; border-radius:12px; border:1px solid var(--secondary)">
			</div>
			<div class="toc" id="mobile-toc"></div>
		</div>
	</div>

	<!-- å†…å®¹åŒºåŸŸ -->
	<main class="content">
		<h1>åä¼šåŸ¹è®­ä¸­å¿ƒ</h1>
		<div class="course-content">
			<article class="markdown-content">
				${marked.parse(`
				# ğŸ‘‹ æ¬¢è¿æ¥åˆ°æ™ºèƒ½åŸ¹è®­ä¸­å¿ƒ

				## ğŸš€ å¿«é€Ÿå¼€å§‹
				- ç‚¹å‡»å³ä¸‹è§’æ‚¬æµ®æŒ‰é’®æ‰“å¼€è¯¾ç¨‹ç›®å½•
				- ä½¿ç”¨æœç´¢åŠŸèƒ½å¿«é€Ÿå®šä½å†…å®¹
				- ç‚¹å‡»ä»»æ„è¯¾ç¨‹å¼€å§‹å­¦ä¹ 

				## ğŸŒŸ ç‰¹è‰²åŠŸèƒ½
				- **å®æ—¶è¿›åº¦ä¿å­˜** - è‡ªåŠ¨è®°å½•å­¦ä¹ ä½ç½®
				- **å¤šç«¯åŒæ­¥** - æ‰‹æœº/PCæ— ç¼åˆ‡æ¢
				- **æ™ºèƒ½æœç´¢** - æ”¯æŒå…³é”®è¯é«˜äº®
				- **å¤œé—´æ¨¡å¼** - è‡ªåŠ¨é€‚åº”ç³»ç»Ÿè®¾ç½®

				## ğŸ“š è¯¾ç¨‹ä½“ç³»
				```mermaid
				graph TD
					A[ç¼–ç¨‹åŸºç¡€] --> B(Cè¯­è¨€)
					A --> C(Python)
					D[ç¡¬ä»¶çŸ¥è¯†] --> E(ç”µè·¯åŸºç¡€)
					D --> F(MCUæ¶æ„)
					G[å¼€å‘å®æˆ˜] --> H(STM32)
					G --> I(OpenCV)
				```

				## ğŸ›  æŠ€æœ¯æ ˆ
				| é¢†åŸŸ       | æŠ€æœ¯                 |
				|------------|----------------------|
				| å‰ç«¯       | HTML5/CSS3/ES6       |
				| è§£æå¼•æ“   | Marked.js            |
				| å¯è§†åŒ–     | Mermaid              |
				| äº¤äº’       | åŸç”ŸJavaScript       |

				## ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–
				- æ‰‹åŠ¿æ“ä½œæ”¯æŒ
				- ç›®å½•æ‚¬æµ®æŒ‰é’®
				- 60fpsæµç•…åŠ¨ç”»
				- æ™ºèƒ½æ»šåŠ¨é”å®š

				> ğŸ“ æ¸©é¦¨æç¤ºï¼šé•¿æŒ‰ç›®å½•é¡¹å¯æ·»åŠ ä¹¦ç­¾
				`)}
			</article>
		</div>
	</main>

	<script src="style/marked.min.js"></script>
	<script>
		// åŠ¨æ€ç”Ÿæˆç›®å½•
		const courseFiles = [
			// ç¼–ç¨‹è¯­è¨€åŸºç¡€
			"test/md/ç¼–ç¨‹è¯­è¨€åŸºç¡€ - Cè¯­è¨€.md",
			"test/md/ç¼–ç¨‹è¯­è¨€åŸºç¡€ - Python.md",

			// ç¡¬ä»¶åŸºç¡€
			"test/md/ç¡¬ä»¶åŸºç¡€çŸ¥è¯† - ç”µè·¯åŸºç¡€.md",
			"test/md/ç¡¬ä»¶åŸºç¡€çŸ¥è¯† - MCUæ¦‚å¿µåŠæ¶æ„.md",

			// å•ç‰‡æœºåè®®
			"test/md/å•ç‰‡æœºçš„åè®® - STM32.md",
			"test/md/å•ç‰‡æœºçš„åè®® - ä¸²å£åŠ©æ‰‹.md",

			// å¼€å‘ç¯å¢ƒ
			"test/md/å¼€å‘ç¯å¢ƒåŠå…¶å›ºä»¶åº“ - æ ‡å‡†åº“.md",
			"test/md/å¼€å‘ç¯å¢ƒåŠå…¶å›ºä»¶åº“ - HALåº“.md",

			// PCBè®¾è®¡
			"test/md/PCBè®¾è®¡ä¸åˆ¶ä½œ - å­¦ä¹ ä½¿ç”¨EDAå·¥å…·.md",
			"test/md/PCBè®¾è®¡ä¸åˆ¶ä½œ - å…è´¹æ‰“æ ·æ¿.md",

			// æœºå™¨è§†è§‰
			"test/md/æœºå™¨è§†è§‰ - åŸºç¡€è§†è§‰å¤„ç†ä¸Matlab.md",
			"test/md/æœºå™¨è§†è§‰ - OpenMV.md",
			"test/md/æœºå™¨è§†è§‰ - Linuxä¸OpenCVï¼ˆåˆè¯†ç¯‡ï¼‰.md",
			"test/md/æœºå™¨è§†è§‰ - Linuxä¸OpenCV-Linuxç¯‡(ä¸€).md"
		];

		// åŠ¨æ€ç”Ÿæˆç›®å½•ç»“æ„
		function generateTOC() {
			const tocMap = new Map();

			courseFiles.forEach(path => {
				const [category, filename] = path.split('/').pop().split(' - ');
				if (!tocMap.has(category)) {
					tocMap.set(category, []);
				}
				tocMap.get(category).push({
					name: filename.replace('.md', ''),
					path: path
				});
			});

			let tocHTML = '';
			tocMap.forEach((items, category) => {
				tocHTML += `
                    <div class="toc-category">
                        <h3>${category}</h3>
                        ${items.map(item => `
                            <div class="toc-subitem" data-file="${item.path}">
                                ${item.name}
                            </div>
                        `).join('')}
                    </div>
                `;
			});

			document.getElementById('mobile-toc').innerHTML = tocHTML;
		}

		// æµ®åŠ¨æŒ‰é’®äº¤äº’é€»è¾‘
		const floatingToc = document.querySelector('.floating-toc');
		const tocOverlay = document.querySelector('.toc-overlay');

		floatingToc.addEventListener('click', (e) => {
			e.stopPropagation();
			floatingToc.classList.toggle('active');
			tocOverlay.classList.toggle('active');
		});

		// ç‚¹å‡»å¤–éƒ¨å…³é—­
		tocOverlay.addEventListener('click', (e) => {
			if (e.target === tocOverlay) {
				floatingToc.classList.remove('active');
				tocOverlay.classList.remove('active');
			}
		});

		// ç§»åŠ¨ç«¯æœç´¢åŠŸèƒ½
		document.getElementById('mobile-search').addEventListener('input', (e) => {
			const term = e.target.value.trim().toLowerCase();
			document.querySelectorAll('.toc-subitem').forEach(item => {
				const text = item.textContent;
				const regex = new RegExp(`(${term})`, 'gi');
				item.innerHTML = term ? 
					text.replace(regex, '<span class="highlight">$1</span>') : 
					text;
				item.style.display = term ? 
					(text.toLowerCase().includes(term) ? 'block' : 'none') : 
					'block';
			});
		});

		// ä¼˜åŒ–ç§»åŠ¨ç«¯ç‚¹å‡»ä½“éªŒ
		document.querySelectorAll('.toc-subitem').forEach(item => {
			item.addEventListener('click', () => {
				floatingToc.classList.remove('active');
				tocOverlay.classList.remove('active');
			});
		});

		// æ–°å¢åŠŸèƒ½ï¼šé˜…è¯»è¿›åº¦æ¡
		function setupProgressBar() {
			const progressBar = document.createElement('div');
			progressBar.className = 'progress-bar';
			document.body.prepend(progressBar);
			
			window.addEventListener('scroll', () => {
				const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
				const progress = (window.scrollY / scrollHeight) * 100;
				progressBar.style.width = progress + '%';
			});
		}

		// åˆå§‹åŒ–æ–°åŠŸèƒ½
		generateTOC();
		setupProgressBar();

		// ä¿®æ”¹å†…å®¹åŠ è½½é€»è¾‘é€‚é…PCç«¯å¸ƒå±€
		document.addEventListener('click', async (e) => {
			if (e.target.closest('.toc-subitem')) {
				const contentArea = document.querySelector('.course-content');
				contentArea.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>æ­£åœ¨åŠ è½½å†…å®¹...</p>
                    </div>
                `;
				
				const item = e.target.closest('.toc-subitem');
				const filePath = item.dataset.file;

				try {
					const response = await fetch(filePath);
					const markdown = await response.text();
					contentArea.innerHTML = `
                        <article class="markdown-content">
                            ${marked.parse(markdown)}
                        </article>
                    `;

					// PCç«¯è‡ªåŠ¨æ»šåŠ¨åˆ°æ ‡é¢˜ä½ç½®
					if (window.innerWidth > 768) {
						window.scrollTo({
							top: contentArea.offsetTop - 20,
							behavior: 'smooth'
						});
					}

					// æ·»åŠ å†å²è®°å½•
					history.pushState({}, '', `#${encodeURIComponent(filePath)}`);
				} catch (error) {
					contentArea.innerHTML = `
                        <div class="error">
                            <h3>âš ï¸ å†…å®¹åŠ è½½å¤±è´¥</h3>
                            <p>${error.message}</p>
                        </div>
                    `;
				}
			}
		});

		// æ–°å¢æŒä¹…åŒ–å­˜å‚¨
		window.addEventListener('beforeunload', () => {
			localStorage.setItem('lastScroll', window.scrollY);
		});
		window.addEventListener('load', () => {
			const lastScroll = localStorage.getItem('lastScroll');
			if (lastScroll) window.scrollTo(0, lastScroll);
		});

		// ç§»åŠ¨ç«¯ç‚¹å‡»å¤–éƒ¨å…³é—­èœå•
		document.addEventListener('click', (e) => {
			if (window.innerWidth <= 768 &&
				!e.target.closest('.sidebar') &&
				!e.target.closest('.menu-toggle')) {
				document.querySelector('.sidebar').classList.remove('active');
			}
		});

		// å¢å¼ºç§»åŠ¨ç«¯ç›®å½•æ»šåŠ¨å¤„ç†
		let isTouchingToc = false;
		const mobileToc = document.querySelector('.mobile-toc');

		// è§¦æ‘¸å¼€å§‹äº‹ä»¶
		mobileToc.addEventListener('touchstart', e => {
			isTouchingToc = true;
			touchStartY = e.touches[0].clientY;
		}, { passive: true });

		// è§¦æ‘¸ç§»åŠ¨äº‹ä»¶
		mobileToc.addEventListener('touchmove', e => {
			if (!isTouchingToc) return;
			
			const currentY = e.touches[0].clientY;
			const deltaY = currentY - touchStartY;
			const isScrollingUp = deltaY < 0;
			
			// æ£€æµ‹æ»šåŠ¨è¾¹ç•Œ
			const atTop = mobileToc.scrollTop === 0;
			const atBottom = mobileToc.scrollHeight - mobileToc.scrollTop === mobileToc.clientHeight;
			
			// é˜»æ­¢çˆ¶å®¹å™¨æ»šåŠ¨
			if ((atTop && !isScrollingUp) || (atBottom && isScrollingUp)) {
				e.preventDefault();
			}
			
			touchStartY = currentY;
		}, { passive: false });

		// è§¦æ‘¸ç»“æŸäº‹ä»¶
		mobileToc.addEventListener('touchend', () => {
			isTouchingToc = false;
		}, { passive: true });

		// ä¼˜åŒ–æ»šåŠ¨å®¹å™¨æ ·å¼
		mobileToc.style.webkitOverflowScrolling = 'touch';
		mobileToc.style.overscrollBehavior = 'contain';

		// å¢å¼ºç›®å½•è§¦æ‘¸å¤„ç†
		let lastScrollTime = 0;
		mobileToc.addEventListener('scroll', () => {
			lastScrollTime = Date.now();
		});

		document.addEventListener('touchmove', (e) => {
			if (Date.now() - lastScrollTime < 100 && !e.target.closest('.mobile-toc')) {
				e.preventDefault();
			}
		}, { passive: false });
	</script>
</body>

</html>